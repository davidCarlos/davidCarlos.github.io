
<!DOCTYPE HTML>
<html>
<head>
	<script data-cfasync="false" type="text/javascript" src="//use.typekit.net/axj3cfp.js"></script>
	<script data-cfasync="false" type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<meta charset="utf-8">
	<title>  | David's Blog</title>

<meta name="author" content="David Carlos"> 

<meta name="description" content="Muitas vezes, ao tentarmos montar um pendrive, temos alguns problemas no linux.
Um desses problemas é o SO não reconhecer o pendrive no momento em &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="David's Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="/javascripts/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script>

	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">David's Blog</a></h1>
<h4></h4>
<nav id="main-nav"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/portfolio">Portfolio</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/portfolio">Portfolio</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/davidCarlos" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:davidcarlos.github.io">
			</form>
		</div>
	</div>
</nav>


</header>

	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/03/27/preparando-montangem-de-pendrive-pelo-arquivo-fstab/">
		
			Preparando Montangem De Pendrive Pelo Arquivo Fstab</a>
	</h2>
	<div class="entry-content">
		<p>Muitas vezes, ao tentarmos montar um pendrive, temos alguns problemas no linux.
Um desses problemas é o SO não reconhecer o pendrive no momento em que inserimos
o pendrive no pc. Uma forma de listar quais sistemas de arquivo estão montados
e em que diretório foram montados é utilizando o comando <code>mount</code>. O problema é que
se o linux não reconheceu o pendrive automaticamente, quando executarmos o comando
<code>mount</code>, nosso pendrive não será listado. Um forma(não a melhor forma, devo deixar isso
bem claro) de contornar esse problema é montar o pendrive manualmente. Para isso iremos
utilizar o comando <code>blkid</code>. Esse comando irá nos mostrar os <code>block devices</code>.</p>

<p><code>Block devices</code> são os dispositivos, no linux, que guardam dados, um pendrive por exemplo.
Quando executamos o comando <code>blkid</code>, iremos visualizar o seguinte:</p>

<p><img src="/images/blkid.png"></p>

<p>Agora ficou fácil, pois o comando <code>blkid</code> nos mostra o UUID do dispositivo. O <code>UUID</code> é um
identificador único para cada sistema de arquivos mantidos pelos <code>block devices</code>.</p>

<p>No arquivo /etc/fstab adicionamos a linha</p>

<pre><code>UUID=D488-3B7E /media/david vfat defaults
</code></pre>

<p>O primeiro argumento não precisa ser explicado, o segundo argumento é o diretório em que
o <code>block devices</code> será montado, e o terceiro argumento o define o tipo do sistema de arquivos.</p>

<p>Agora para montar o pendrive, basta fazer</p>

<pre><code> # mount /dev/sdb1
</code></pre>

<p>Nesse caso usamos /dev/sdb1 pois foi o que o comando blkid printou na tela, mas poderia
ser outro dispositivo.</p>

<p>Devo ressaltar que esse procedimento deve ser feito com cuidado e em ultimo caso, pois
ao adicionar um novo ponto de montagem no arquivo <code>/etc/fstab</code>, no momento em que a máquina
for iniciada, o kernel irá tentar montar esse device, e caso o pendrive não esteja conectado
na máquina, o sistema não irá inicializar corretamente.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-03-27T19:10:02-03:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/debian/'>debian</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/tips/'>tips</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/03/17/meu-primeiro-pacote-no-debian/">
		
			Debian: Fazendo Meu Primeiro Pacote - Parte 1</a>
	</h2>
	<div class="entry-content">
		<p>Quando abrimos nosso terminal e digitamos <code>sudo apt-get install mutt</code>, estamos
dizendo para o Debian, que queremos instalar um <code>pacote</code> chamado mutt usando o
gerenciador de pacotes <code>apt-get</code> e que estamos fazendo isso com permissões de root.</p>

<p>Não irei comentar nesse post como é a política de upload de pacotes no Debian,
além do fato de existir muita documentação do Debian relacionado a isso. Basicamente
o que irei comentar aqui, são as ferramentas necessárias para criar um pacote para
o debian, mais expecificamente um pacote em que o upstream é escrito em python.</p>

<p>Em resumo um pacote Debian é formado por:</p>

<pre><code> * Diretório debian
 * Código do upstream
</code></pre>

<p>Estamos considerando o caso em que não iremos criar um pacote do zero, logo o diretório
debian já irá existir. Para baixar a ultima versão do pacote no debian basta fazer:</p>

<pre><code>sudo apt-get source urlscan
</code></pre>

<p>Quando baixarmos o source do urlscan três arquivo e um diretório irão aparecer.</p>

<ol>
<li>urlscan_&lt;version>-&lt;release>.debian.tar.xz: Tarball com o diretório debian</li>
<li>urlscan_&lt;version>.orig.tar.xz: Tarball com o código do upstream inalterado.</li>
<li>urlscan_&lt;version>-&lt;release>.dsc: Arquivo que descreve a versão atual do pacote que acabamos de baixar.</li>
<li>urlscan-&lt;version>: Diretório com o código do upstream + diretório debian</li>
</ol>


<p>É dentro do diretório debian que iremos definir como o pacote será construido(aonde
os arquivos de configuração e os binários gerados serão colocados).
Basicamente o diretório debian deve ter no mínimo a os seguintes arquivos:</p>

<ol>
<li><em>changelog</em>: Registra tudo que foi feito no pacote e por quem</li>
<li><em>compat</em>: Define a versão do debhelper a ser usada (atualmente estamos na 9)</li>
<li><em>control</em>: Define quais as dependências de construção e instalação do pacote,
além de informações básicas requeridas pelo Debian, como o nome do pacote, uma breve
descrição, e etc.</li>
<li><em>rules</em>: Define o passo a passo para a construção do pacote. O Debian está ai
para te ajudar, então o recomendado é utilizar os helpers do Debian, e deixar que eles
façam o trabalho pesado. Pode ocorrer de que o comportamento padrão dos helpers não seja
o suficiente, então nesse caso, você pode sobrescrevê-los adicionando o que for necessário.</li>
<li><em>copyright</em>: Define a licença em que esse pacote será distribuído.</li>
<li><em>watch</em>: Nesse arquivo você definirá uma regex, que será executada pelo comando uscan,
para encontrar novas versões do upstream.</li>
</ol>


<p>O upstream é a pessoa,comunidade ou organização que desenvolve o código fonte do software
que você quer empacotar. Hoje em dia, boa parte dos upstreams estão em plataformas como github,
gitlab e sourceforge, então provavelmente seu arquivo <em>watch</em> irá apontar para um desses lugares.</p>

<p>O upstream que iremos empacotar será o urlscan(<a href="https://packages.qa.debian.org/u/urlscan.html">https://packages.qa.debian.org/u/urlscan.html</a>).
Esse programa faz o parser de arquivos html e extrai e apresenta urls de uma maneira amigável.
Esse pacote deve ser usado com um cliente de email que rode no terminal, como é o caso do mutt.</p>

<p>O primeiro passo a se fazer é tentar construir o pacote dentro do seu ambiente de
empacotamento(no meu caso eu uso o vagrant com o debian sid). Vale lembrar que sempre que formos
empacotar algo para o debian, obrigatoriamente temos que estar em um ambiente debian unstable.</p>

<p>Abra o arquivo <code>control</code> dentro do diretório debian, e veja quais os pacotes foram colocados
como dependência(Build-Depends-Indep). Iremos precisar instalá-los para que o pacote possa ser construído.</p>

<p>Com todas as dependências instaladas, e estando na raiz do diretório urlscan-&lt;version> execute o comando <code>debuild</code>.
Se tudo der certo teremos, um diretório acima do diretório raiz do source, um pacote .deb do urlscan.</p>

<p>Continuamos no proximo post =) .</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-03-17T14:26:45-03:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/debian/'>debian</a>, <a class='category' href='/blog/categories/devops/'>devops</a>, <a class='category' href='/blog/categories/packing/'>packing</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/02/27/vim-salvando-arquivos-como-sudo/">
		
			Vim: Salvando Arquivos Como Sudo</a>
	</h2>
	<div class="entry-content">
		<p>Esse é o primeiro post deste blog pessoal, e obvimente eu não poderia falar
de outra coisa, se não a ferramenta que eu mais uso durante o tempo em que estou
no pc, o vim. Será um post curto, então vamos ao que interessa.</p>

<p>Quando abrimos aquele arquivo que precisa de permissão de root para ser editado,
é muito chato ter que sair do vim e abrir o arquivo com sudo.</p>

<p><img src="/images/vim1.png"></p>

<p>Edite seu arquivo normalmente, e no momento de salvá-lo, ao invés de sair do vim
e entrar como sudo (você pode executar o seu
ultimo comando como sudo apenas fazendo <code>sudo !!</code>), basta fazer:</p>

<pre><code>   :w !sudo tee %
</code></pre>

<p>O vim pode pedir sua senha de sudo ou salvar automaticamente caso você já tenha usado alguma comando com sudo antes.
Você pode mapear esse comando no seu vimrc para facilitar na hora de salvar o arquivo.
No meu vimrc eu fiz o seguinte mapeamento:</p>

<pre><code>    nmap &lt;LEADER&gt;R :w !sudo tee %&lt;CR&gt;
</code></pre>

<p>Aonde <strong>&lt;LEADER></strong> equivale a virgula, nas minhas configurações.
Lembrando que para sair do arquivo você irá precisar forçar com <code>:q!</code></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-02-27T21:37:21-03:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/tips/'>tips</a>, <a class='category' href='/blog/categories/vim/'>vim</a>

</div>


	
</div></article>

<nav id="pagenavi">
    
    
    <div class="center"><a href="/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2016

    David Carlos

<br>
Powered by Octopress.
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>
